let fs=require("fs"),path=require("path"),sass=require("sass");function findSCSS(r,i={}){let e="https://github.com/adamlui/scss-to-css/tree/main/node.js/#findscsssearchdir-options",n="findSCSS() » ";var o={recursive:!0,verbose:!0,dotFolders:!1,ignores:[]};if("string"!=typeof r)console.error(n+"ERROR: 1st arg <searchDir> must be a string."),console.info(n+"For more help, please visit "+e);else{var s=path.resolve(process.cwd(),r);if(fs.existsSync(s)){if(validateOptions(i,o,e,"findSCSS('assets/scss', { verbose: false, dotFolders: true })")){(i={...o,...i}).ignoreFiles&&(i.ignores=[...i.ignores??[],...i.ignoreFiles]);let e=fs.readdirSync(r),s=[];return i.verbose&&!i.isRecursing&&console.info(n+"Searching for SCSS files..."),e.forEach(e=>{let o=path.resolve(r,e);i.ignores.some(s=>s.endsWith("/")?o.split(path.sep).some(e=>e==s.replace(/\/$/,"")):e==s)?i.verbose&&console.info(n+`** ${e} ignored`):fs.statSync(o).isDirectory()&&"node_modules"!=e&&i.recursive&&(i.dotFolders||!e.startsWith("."))?s.push(...findSCSS(o,{...i,isRecursing:!0})):e.endsWith(".scss")&&s.push(o)}),i.verbose&&!i.isRecursing&&(console.info(n+"Search complete! "+`${s.length||"No"} file${1==s.length?"":"s"} found.`),"compile"!=findSCSS.caller?.name)&&"undefined"!=typeof window&&console.info(n+"Check returned array."),i.isRecursing||s.length?s:[]}}else console.error(n+"ERROR: 1st arg <searchDir> must be an existing directory."),console.error(n+s+" does not exist."),console.info(n+"For more help, please visit "+e)}}function compile(i,n={}){let e="https://github.com/adamlui/scss-to-css/tree/main/node.js/#compileinput-options",t="compile() » ";var s={recursive:!0,verbose:!0,dotFolders:!1,minify:!0,sourceMaps:!0,relativeOutput:!1,ignores:[],comment:""};if("string"!=typeof i)console.error(t+"ERROR: 1st arg <input> must be a string."),console.info(t+"For more help, please visit "+e);else if(validateOptions(n,s,e,"compile('assets/scss', { recursive: false, minify: false })")){(n={...s,...n}).ignoreFiles&&(n.ignores=[...n.ignores??[],...n.ignoreFiles]);let r={style:n.minify?"compressed":"expanded",sourceMap:n.sourceMaps,charset:!1};if(fs.existsSync(i)){if(!i.endsWith(".scss")||!fs.statSync(i).isFile())return s=findSCSS(i,n)?.map(s=>{n.verbose&&console.info(t+`** Compiling ${s}...`);try{var o=sass.compile(s,r);let e;return n.relativeOutput||(e=path.relative(path.resolve(process.cwd(),i),s)),n.comment&&(o.css=l(o.css,n.comment)),{code:o.css,srcMap:o.sourceMap,srcPath:s,relPath:e,error:void 0}}catch(e){return console.error(`
${t}ERROR: ${e.message}
`),{code:void 0,srcMap:void 0,srcPath:void 0,error:e}}}).filter(e=>!e.error),n.verbose&&(s.length&&"undefined"!=typeof window?console.info(t+"Compilation complete! Check returned object."):console.info(t+"No SCSS files processed.")),s;n.verbose&&console.info(t+`** Compiling ${i}...`);try{var o=sass.compile(i,r);return n.comment&&(o.css=l(o.css,n.comment)),n.verbose&&"undefined"!=typeof window&&console.info(t+"Compilation complete! Check returned object."),{code:o.css,srcMap:o.sourceMap,srcPath:path.resolve(process.cwd(),i),error:void 0}}catch(e){return console.error(`
${t}ERROR: ${e.message}
`),{code:void 0,srcMap:void 0,srcPath:void 0,error:e}}}else{n.verbose&&console.info(t+"** Compiling passed source code...");try{var c=sass.compileString(i,r);return n.comment&&(c.css=l(c.css,n.comment)),{code:c.css,srcMap:c.sourceMap,srcPath:void 0,error:void 0}}catch(e){return console.error(`
${t}ERROR: ${e.message}
`),{code:void 0,srcMap:void 0,srcPath:void 0,error:e}}}function l(e,s){var s=s.split("\n").map(e=>" * "+e).join("\n"),o=e.indexOf("#!");return 0<=o?(o=e.indexOf("\n",o)+1,e.slice(0,o)+`/**
/**
 *  © 2024 Adam Lui & contributors under the MIT license.
 *  Source: https://github.com/adamlui/scss-to-css/tree/main/node.js/src
 *  Documentation: https://github.com/adamlui/scss-to-css/tree/main/node.js/docs
 */
${s}
 */
`+e.slice(o)):`/**
${s}
 */
`+e}}}function validateOptions(e,s,o,r){let i=JSON.stringify(s,void 0,2).replace(/"([^"]+)":/g,"$1:").replace(/"/g,"'").replace(/\n\s*/g," "),n=Object.keys(s).join(", "),t=Object.keys(s).filter(e=>"boolean"==typeof s[e]),c=Object.keys(s).filter(e=>Number.isInteger(s[e])),l=Object.keys(s).filter(e=>Array.isArray(s[e])),a=`${validateOptions.caller?.name||"validateOptions"}() » `;var d,p=r.split(",").findIndex(e=>e.trim().startsWith("{"))+1;function f(){console.info(a+"For more help, please visit "+o)}if(p+=["st","nd","rd"][p-1]||"th","object"!=typeof e)return console.error(a+`ERROR: ${"0th"==p?"[O":p+" arg [o"}ptions] can only be an object of key/values.`),console.info(a+"Example valid call: "+r),console.info(a+`Valid options: [ ${n} ]`),console.info(a+"If omitted, default settings are: "+i),f(),!1;for(d in e)if("isRecursing"==d||Object.prototype.hasOwnProperty.call(s,d)){if(t.includes(d)&&"boolean"!=typeof e[d])return console.error(a+`ERROR: [${d}] option can only be \`true\` or \`false\`.`),f(),!1;if(c.includes(d)){if(e[d]=parseInt(e[d],10),isNaN(e[d])||e[d]<1)return console.error(a+`ERROR: [${d}] option can only be an integer > 0.`),f(),!1}else if(l.includes(d))if("string"!=typeof e[d]||e[d].includes(",")){if(!Array.isArray(e[d]))return console.error(a+`ERROR: [${d}] option can only be an array.`),f(),!1}else e[d]=[e[d]]}return!0}let stcAliases={compile:["build","Build","Compile","compress","Compress","minify","Minify"],findSCSS:["find","Find","findscss","findScss","Findscss","FindScss","FindSCSS","search","Search"]};module.exports={compile:compile,findSCSS:findSCSS};for(let s in stcAliases)stcAliases[s].forEach(e=>module.exports[e]=module.exports[s]);