#!/usr/bin/env node
/**
 * © 2024–2026 Adam Lui & contributors under the MIT license.
 * Source: https://github.com/adamlui/minify.js/tree/main/node.js/src
 * Documentation: https://github.com/adamlui/minify.js/tree/main/node.js/docs
 */
(async()=>{globalThis.env={args:process.argv.slice(2),devMode:/[\\/]src(?:[\\/]|$)/i.test(__dirname)},env.debugMode=env.args.some(e=>/^--?debug(?:-?mode)?$/.test(e)),env.modExt=`${env.devMode?"":".min"}.js`;let e=require("./lib/compile"+env.modExt),i=require("../minify"+env.modExt).findJS,s=require("fs"),r=require("./lib/init"+env.modExt),n=require("./lib/log"+env.modExt),o=require("path");if(await r.cli(),cli.config.init)return r.configFile();if(cli.config.help)return n.help();if(cli.config.version)return n.version();var[t="",c=""]=env.args.filter(e=>!e.startsWith("-")).map(e=>e.replace(/^\/*/,""));let l=o.resolve(process.cwd(),t);t&&!s.existsSync(l)&&(d=l+".js",s.existsSync(d)?l=d:(n.error(`${cli.msgs.error_firstArgNotExist}.\n${l} ${cli.msgs.error_doesNotExist}.`),n.success(cli.msgs.info_exampleValidCmd+`: 
» minify-js . output.min.js`),n.helpCmdAndDocURL(),process.exit(1)));var d=l.endsWith(".js")&&!s.statSync(l).isDirectory()?[l]:i(l,{recursive:!cli.config.noRecursion,verbose:!cli.config.quietMode,ignores:cli.config.ignores});env.debugMode||cli.config.dryRun?d.length?(n.info(cli.msgs.info_filesToBeMinned+":"),d.forEach(e=>n.dim(e))):n.info(cli.msgs.info_noFilesWillBeMinned+"."):e.js({srcFiles:d,inputPath:l,inputArg:t,outputArg:c})})();