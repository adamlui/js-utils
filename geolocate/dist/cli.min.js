#!/usr/bin/env node
/**
/**
 *  Â© 2023â€“2026 Adam Lui & contributors under the MIT license.
 *  Source: https://code.minify-js.org/node.js
 *  Documentation: https://docs.minify-js.org/node.js
 */
 *  Â© 2024â€“2026 Adam Lui under the MIT license.
 *  Source: https://code.geolocatejs.org
 *  Documentation: https://docs.geolocatejs.org
 */
let pkgName="@adamlui/geolocate",copyright="Â© 2024â€“2026 Adam Lui under the MIT license.",cmdFormat="geolocate [ip1] [ip2] [...] [options|commands]",srcURL="https://code.geolocatejs.org",docURL="https://docs.geolocatejs.org/#-command-line-usage",latestLocaleCommitHash="0e30af1";(async()=>{let e=require(__dirname.match(/src/)?"./geolocate":"./geolocate.min"),n=require("fs"),s=require("path"),{execSync:i,execFileSync:o}=require("child_process"),r="[0m",t="[1;97m",l="en";if("win32"==process.platform)try{l=i("(Get-Culture).TwoLetterISOLanguageName",{shell:"powershell",encoding:"utf-8"}).trim()}catch(e){console.error("ERROR loading system language:",e.message)}else{var a=process.env;l=(a.LANG||a.LANGUAGE||a.LC_ALL||a.LC_MESSAGES||a.LC_NAME||"en").split(".")[0]}let c={};var p,g,a=new Promise((i,r)=>{let t=`https://cdn.jsdelivr.net/gh/adamlui/js-utils@dcec59086231fca1628052cb45339829b112c5ff/geolocate/_locales/`,e=`${l?l.replace("-","_"):"en"}/`,a=t+e+"messages.json",c=0;v(a).then(async function o(n){try{let e=await n.json(),o={};for(var s in e)"object"==typeof e[s]&&"message"in e[s]&&(o[s]=e[s].message);i(o)}catch(e){if(3==++c)return i({});v(a=l.includes("-")&&1==c?a.replace(/([^_]*)_[^/]*(\/.*)/,"$1$2"):t+"en/messages.json").then(o).catch(r)}}).catch(r)});try{c=await a}catch(e){console.error("ERROR fetching messages: "+e.message)}let m={},f={flags:{quietMode:/^--?q(?:uiet)?(?:-?mode)?$/},infoCmds:{help:/^--?h(?:elp)?$/,version:/^--?ve?r?s?i?o?n?$/}};if(process.argv.forEach(o=>{var e,n;o.startsWith("-")&&(e=Object.keys(f.flags).find(e=>f.flags[e].test(o)),n=Object.keys(f.infoCmds).find(e=>f.infoCmds[e].test(o)),e?m[e]=!0:n||(console.error(`
${"[1;91m"+(c.prefix_error||"ERROR")}: `+`Arg [${o}] ${c.error_notRecognized||"not recognized"}.[0m`),console.info(`
${"[1;33m"+(c.info_validArgs||"Valid arguments are below")}.[0m`),_(["configOptions","infoCmds"]),process.exit(1)))}),process.argv.some(e=>f.infoCmds.help.test(e)))_();else if(process.argv.some(e=>f.infoCmds.version.test(e))){a=i(`npm view ${pkgName} version`).toString().trim()||"none";let e,o=process.cwd();for(;"/"!=o;){var d=s.join(o,"package.json");if(n.existsSync(d)){d=require(d);e=(d.dependencies?.[pkgName]||d.devDependencies?.[pkgName])?.match(/^[~^>=]?\d+\.\d+\.\d+$/)?.[1]||"none";break}o=s.dirname(o)}console.info(`
${c.prefix_globalVer||"Global version"}: `+a),console.info(`${c.prefix_localVer||"Local version"}: `+e)}else{var $,h,u=[];for($ of process.argv.slice(2))$.startsWith("-")||(h=$.replace(/[[\]]/g,""),u.push(h));a=await e.locate(u,{verbose:!m.quietMode});a||process.exit(1),m.quietMode||1!=a.length||(console.info(`
IP: ${t}${a[0].ip}[0m`),console.info(`${c.geoLabel_country||"Country"}: ${t}${a[0].country}${r}}`),console.info(`${c.geoLabel_region||"Region"}: ${t}${a[0].regionName}${r}}`),console.info(`${c.geoLabel_city||"City"}: ${t}${a[0].city}${r}}`),console.info(`${c.geoLabel_zip||"Zip"}: ${t}${a[0].zip}${r}}`),console.info(`${c.geoLabel_lat||"Latitude"}: ${t}${a[0].lat}${r}}`),console.info(`${c.geoLabel_lon||"Longitude"}: ${t}${a[0].lon}${r}}`),console.info(`${c.geoLabel_timeZone||"Time zone"}: ${t}${a[0].timezone.replace(/_/g," ").replace(/\//g," / ")}${r}`),console.info(`ISP: ${t}${a[0].isp}[0m}`)),g=`
${c.info_copying||"Copying to clipboard"}...`,m.quietMode||console.info(g),g=(g=JSON.stringify(a,void 0,2)).replace(/"/g,'""'),p={darwin:{binPath:"/usr/bin/pbcopy",args:[]},linux:{binPath:"/usr/bin/xclip",args:["-selection","clipboard"]},win32:{binPath:s.join(process.env.SYSTEMROOT,"System32","WindowsPowerShell","v1.0","powershell.exe"),args:["-Command","Set-Clipboard -Value $input"]}},o(...Object.values(p[process.platform]),{input:g})}function v(s){return new Promise((n,e)=>{var o=s.match(/^([^:]+):\/\//)[1];/^https?$/.test(o)||e(new Error(`${c.error_invalidURL||"Invalid URL"}.`)),require(o).get(s,e=>{let o="";e.on("data",e=>o+=e),e.on("end",()=>n({json:()=>JSON.parse(o)}))}).on("error",e)})}function _(e=["header","usage","configOptions","infoCmds"]){var o=`[106m[30m ${pkgName.replace(/^@[^/]+\//,"")} [0m `;let n={header:[`
â”œ `+o+(c.appCopyright||copyright),o+(c.prefix_source||"Source")+": "+srcURL],usage:[`
${t}o ${c.helpSection_usage||"Usage"}:[0m`,` ${t}Â» [1;92m${cmdFormat}[0m`],configOptions:[`
${t}o ${c.helpSection_configOptions||"Config options"}:[0m`,` -q, --quiet                 ${c.optionDesc_quiet||"Suppress all logging except errors"}.`],infoCmds:[`
${t}o ${c.helpSection_infoCmds||"Info commands"}:[0m`," -h, --help                  "+(c.optionDesc_help||"Display help screen."),` -v, --version               ${c.optionDesc_version||"Show version number"}.`]};e.forEach(t=>n[t]?.forEach(o=>{{var r=/header|usage/.test(t)?1:29;let n=process.stdout.columns||80,s=[],e=o.match(/\S+|\s+/g),i="";e.forEach(e=>{var o=n-(s.length?r:0);i.length+"| ".length+e.length>o&&(s.push(s.length?i.trimStart():i),i=""),i+=e}),s.push(s.length?i.trimStart():i),s.forEach((e,o)=>console.info("| "+(0==o?e:" ".repeat(r)+e)))}})),console.info(`
${c.info_moreHelp||"For more help"}, ${c.info_visit||"visit"}: ${t}${docURL}[0m`)}})();