#!/usr/bin/env node
/**
 * © 2024–2026 Adam Lui & contributors under the MIT license.
 * Source: https://github.com/adamlui/js-utils/tree/main/geolocate/src
 * Documentation: https://github.com/adamlui/js-utils/tree/main/geolocate/docs
 */
(async()=>{var e,i=process.argv.slice(2),o=(globalThis.env={debugMode:i.some(e=>/^--?debug(?:-?mode)?$/.test(e)),devMode:/[\\/]src(?:[\\/]|$)/i.test(__dirname)},require("node-clipboardy")),s=require(`../geolocate${env.devMode?"":".min"}.js`),{generateRandomLang:n,getMsgs:r,getSysLang:t}=require(`./lib/language${env.devMode?"":".min"}.js`),a=require(`./lib/log${env.devMode?"":".min"}.js`),g=require(`./lib/settings${env.devMode?"":".min"}.js`),d=(Object.assign(globalThis.app??={},require(`../${env.devMode?"../":"./data/"}app.json`)),app.msgs=await r(env.debugMode?n({excludes:["en"]}):t()),app.urls.docs+="/#-command-line-usage",[]);for(e of i){var l=g.controls.init.regex.test(e);if(l)return g.initConfigFile();if(g.controls.help.regex.test(e))return a.help();if(g.controls.version.regex.test(e))return a.version();e.startsWith("-")||l||d.push(e.replace(/[[\]]/g,""))}g.load();r=await s.locate(d,{verbose:!app.config.quietMode});r||process.exit(1),app.config.quietMode||1!=r.length||a.geoData(r[0]),a.ifNotQuiet(`
${app.msgs.info_copyingToClip}...`),o.writeSync(JSON.stringify(r,void 0,2))})();