#!/usr/bin/env node
/**
 *  Â© 2024â€“2026 Adam Lui & contributors under the MIT license.
 *  Source: https://github.com/adamlui/js-utils/tree/main/generate-pw/src
 *  Documentation: https://github.com/adamlui/js-utils/tree/main/generate-pw/docs
 */
(async()=>{globalThis.env={devMode:__dirname.match(/[\\/]src/)};let e=require("node-clipboardy"),s=require(`../generate-pw${env.devMode?"":".min"}.js`).generatePassword,{getMsgs:r,getSysLang:p}=require(`./lib/language${env.devMode?"":".min"}.js`),a=require(`./lib/print${env.devMode?"":".min"}.js`);Object.assign(globalThis.app??={},require(`../${env.devMode?"../":"./data/"}app.json`)),app.urls.docs+="/#-command-line-usage",app.msgs=await r(p()),app.colors={nc:"[0m",br:"[1;91m",by:"[1;33m",bg:"[1;92m",bw:"[1;97m",blk:"[30m",tlBG:"[106m"},app.regex={paramOptions:{length:/^--?length(?:=.*|$)/,qty:/^--?qu?a?n?ti?t?y(?:=.*|$)/,charset:/^--?charse?t?(?:=.*|$)/,excludeChars:/^--?exclude(?:=.*|$)/},flags:{includeNums:/^--?(?:n|(?:include-?)?num(?:ber)?s?=?(?:true|1)?)$/,includeSymbols:/^--?(?:y|(?:include-?)?symbols?=?(?:true|1)?)$/,excludeLowerChars:/^--?(?:L|(?:exclude|disable|no)-?lower-?(?:case)?|lower-?(?:case)?=(?:false|0))$/,excludeUpperChars:/^--?(?:U|(?:exclude|disable|no)-?upper-?(?:case)?|upper-?(?:case)?=(?:false|0))$/,excludeSimilarChars:/^--?(?:S|(?:exclude|disable|no)-?similar-?(?:char(?:acter)?s?)?|similar-?(?:char(?:acter)?s?)?=(?:false|0))$/,strictMode:/^--?s(?:trict)?(?:-?mode)?$/,quietMode:/^--?q(?:uiet)?(?:-?mode)?$/},infoCmds:{help:/^--?h(?:elp)?$/,version:/^--?ve?r?s?i?o?n?$/},version:/^[~^>=]?\d+\.\d+\.\d+$/},app.config={},process.argv.forEach(s=>{var e,r,p;s.startsWith("-")&&(e=Object.keys(app.regex.paramOptions).find(e=>app.regex.paramOptions[e].test(s)),p=Object.keys(app.regex.flags).find(e=>app.regex.flags[e].test(s)),r=Object.keys(app.regex.infoCmds).find(e=>app.regex.infoCmds[e].test(s)),p?app.config[p]=!0:e?(/=.+/.test(s)||(console.error(`
${app.colors.br}${app.msgs.prefix_error}: Arg [--${s.replace(/-/g,"")}] ${app.msgs.error_noEqual}.`+app.colors.nc),a.helpCmdAndDocURL(),process.exit(1)),p=s.split("=")[1],app.config[e]=parseInt(p)||p):r||(console.error(`
${app.colors.br}${app.msgs.prefix_error}: Arg [${s}] ${app.msgs.error_notRecognized}.`+app.colors.nc),console.info(`
${app.colors.by}${app.msgs.info_validArgs}.`+app.colors.nc),a.help(["paramOptions","flags","infoCmds"]),process.exit(1)))});for(var o of["length","qty"])app.config[o]&&(isNaN(app.config[o])||app.config[o]<1)&&(console.error(`
${app.colors.br}${app.msgs.prefix_error}: [${o}] ${app.msgs.error_nonPositiveNum}.`+app.colors.nc),a.helpCmdAndDocURL(),process.exit(1));var i;process.argv.some(e=>app.regex.infoCmds.help.test(e))?a.help():process.argv.some(e=>app.regex.infoCmds.version.test(e))?a.version():(i={length:app.config.length||8,qty:app.config.qty||1,charset:app.config.charset,exclude:app.config.excludeChars,numbers:!!app.config.includeNums,symbols:!!app.config.includeSymbols,lowercase:!app.config.excludeLowerChars,uppercase:!app.config.excludeUpperChars,excludeSimilarChars:!!app.config.excludeSimilarChars,strict:!!app.config.strictMode,verbose:!app.config.quietMode},a.ifNotQuiet(`
${app.msgs.info_copying}...`),e.writeSync([].concat(s(i)).join("\n")))})();