#!/usr/bin/env node
/**
 * © 2024–2026 Adam Lui & contributors under the MIT license.
 * Source: https://github.com/adamlui/js-utils/tree/main/generate-pw/src
 * Documentation: https://github.com/adamlui/js-utils/tree/main/generate-pw/docs
 */
(async()=>{globalThis.env={args:process.argv.slice(2),devMode:/[\\/]src(?:[\\/]|$)/i.test(__dirname)},env.debugMode=env.args.some(e=>/^--?debug(?:-?mode)?$/.test(e));var e,i=require("node-clipboardy"),c=require(`../generate-pw${env.devMode?"":".min"}.js`).generatePassword,n=require(`./lib/language${env.devMode?"":".min"}.js`),o=require(`./lib/log${env.devMode?"":".min"}.js`),l=require(`./lib/settings${env.devMode?"":".min"}.js`);Object.assign(globalThis.cli??={},require(`../${env.devMode?"../":"data/"}package-data.json`)),l.load("uiLang"),cli.lang=cli.config.uiLang||(env.debugMode?n.generateRandomLang({excludes:["en"]}):n.getSysLang()),cli.msgs=await n.getMsgs(cli.lang),cli.lang.startsWith("en")?cli.urls.docs+="/#-command-line-usage":(cli.docLocale=cli.lang.replace("_","-").toLowerCase(),(await n.getDocLocales()).includes(cli.docLocale)&&o.debug(cli.urls.docs+=`/${cli.docLocale}#readme`));for(e of env.args){if(l.controls.init.regex.test(e))return l.initConfigFile();if(l.controls.help.regex.test(e))return o.help();if(l.controls.version.regex.test(e))return o.version()}l.load();n={length:cli.config.length,qty:cli.config.qty,strength:cli.config.mode,charset:cli.config.charset,exclude:cli.config.excludeChars,numbers:!cli.config.excludeNums,symbols:!cli.config.excludeSymbols,lowercase:!cli.config.excludeLowerChars,uppercase:!cli.config.excludeUpperChars,similarChars:cli.config.similarChars,strict:!cli.config.unstrict,entropy:cli.config.entropy,verbose:!cli.config.quietMode};i.writeSync([].concat(c(n)).join("\n")),o.ifNotQuiet(`
${cli.msgs.info_copyingToClip}...`)})();