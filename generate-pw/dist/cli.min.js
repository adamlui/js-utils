#!/usr/bin/env node
/**
/**
 *  Â© 2023â€“2026 Adam Lui & contributors under the MIT license.
 *  Source: https://code.minify-js.org/node.js
 *  Documentation: https://docs.minify-js.org/node.js
 */
 *  Â© 2024â€“2026 Adam Lui & contributors under the MIT license.
 *  Source: https://code.generatepw.org
 *  Documentation: https://docs.generatepw.org
 */
let pkgName="generate-pw",copyright="Â© 2024â€“2026 Adam Lui & contributors under the MIT license.",cmdFormat="generate-pw [options|commands]",srcURL="https://code.generatepw.org",docURL="https://docs.generatepw.org/#-command-line-usage",latestLocaleCommitHash="0e30af1";(async()=>{let e=require(__dirname.match(/src/)?"./generate-pw":"./generate-pw.min").generatePassword,r=require("fs"),o=require("path"),{execSync:n,execFileSync:s}=require("child_process"),a="[0m",t="[1;91m",i="[1;97m",c="en";if("win32"==process.platform)try{c=n("(Get-Culture).TwoLetterISOLanguageName",{shell:"powershell",encoding:"utf-8"}).trim()}catch(e){console.error("ERROR loading system language:",e.message)}else{var l=process.env;c=(l.LANG||l.LANGUAGE||l.LC_ALL||l.LC_MESSAGES||l.LC_NAME||"en").split(".")[0]}let p={};var m,d,u,l=new Promise((n,a)=>{let t=`https://cdn.jsdelivr.net/gh/adamlui/js-utils@2e0c106d65039ed281f770509d6aeeb11a55c282/${pkgName}/_locales/`;var e=`${c?c.replace("-","_"):"en"}/`;let i=t+e+"messages.json",l=0;$(i).then(async function s(r){try{let e=await r.json(),s={};for(var o in e)"object"==typeof e[o]&&"message"in e[o]&&(s[o]=e[o].message);n(s)}catch(e){if(3==++l)return n({});$(i=c.includes("-")&&1==l?i.replace(/([^_]*)_[^/]*(\/.*)/,"$1$2"):t+"en/messages.json").then(s).catch(a)}}).catch(a)});try{p=await l}catch(e){console.error("ERROR fetching messages: "+e.message)}let h={},g={paramOptions:{length:/^--?length(?:=.*|$)/,qty:/^--?qu?a?n?ti?t?y(?:=.*|$)/,charset:/^--?charse?t?(?:=.*|$)/,excludeChars:/^--?exclude(?:=.*|$)/},flags:{includeNums:/^--?(?:n|(?:include-?)?num(?:ber)?s?=?(?:true|1)?)$/,includeSymbols:/^--?(?:y|(?:include-?)?symbols?=?(?:true|1)?)$/,excludeLowerChars:/^--?(?:L|(?:exclude|disable|no)-?lower-?(?:case)?|lower-?(?:case)?=(?:false|0))$/,excludeUpperChars:/^--?(?:U|(?:exclude|disable|no)-?upper-?(?:case)?|upper-?(?:case)?=(?:false|0))$/,excludeSimilarChars:/^--?(?:S|(?:exclude|disable|no)-?similar-?(?:char(?:acter)?s?)?|similar-?(?:char(?:acter)?s?)?=(?:false|0))$/,strictMode:/^--?s(?:trict)?(?:-?mode)?$/,quietMode:/^--?q(?:uiet)?(?:-?mode)?$/},infoCmds:{help:/^--?h(?:elp)?$/,version:/^--?ve?r?s?i?o?n?$/}};process.argv.forEach(s=>{var e,r,o;s.startsWith("-")&&(e=Object.keys(g.paramOptions).find(e=>g.paramOptions[e].test(s)),o=Object.keys(g.flags).find(e=>g.flags[e].test(s)),r=Object.keys(g.infoCmds).find(e=>g.infoCmds[e].test(s)),o?h[o]=!0:e?(/=.+/.test(s)||(console.error(`
${t+(p.prefix_error||"ERROR")}: `+`Arg [--${s.replace(/-/g,"")}] `+`${p.error_noEqual||"requires '=' followed by a value"}.${a}`),w(),process.exit(1)),o=s.split("=")[1],h[e]=parseInt(o)||o):r||(console.error(`
${t+(p.prefix_error||"ERROR")}: `+`Arg [${s}] ${p.error_notRecognized||"not recognized"}.[0m`),console.info(`
${"[1;33m"+(p.info_validArgs||"Valid arguments are below")}.[0m`),_(["paramOptions","flags","infoCmds"]),process.exit(1)))});for(m of["length","qty"])h[m]&&(isNaN(h[m])||h[m]<1)&&(console.error(`
${t+(p.prefix_error||"ERROR")}: [${m}] `+`${p.error_nonPositiveNum||"argument can only be > 0"}.${a}`),w(),process.exit(1));if(process.argv.some(e=>g.infoCmds.help.test(e)))_();else if(process.argv.some(e=>g.infoCmds.version.test(e))){l=n(`npm view ${pkgName} version`).toString().trim()||"none";let e,s=process.cwd();for(;"/"!=s;){var f=o.join(s,"package.json");if(r.existsSync(f)){f=require(f);e=(f.dependencies?.[pkgName]||f.devDependencies?.[pkgName])?.match(/^[~^>=]?\d+\.\d+\.\d+$/)?.[1]||"none";break}s=o.dirname(s)}console.info(`
${p.prefix_globalVer||"Global version"}: `+l),console.info(`${p.prefix_localVer||"Local version"}: `+e)}else{l={length:h.length||8,qty:h.qty||1,charset:h.charset,exclude:h.excludeChars,numbers:!!h.includeNums,symbols:!!h.includeSymbols,lowercase:!h.excludeLowerChars,uppercase:!h.excludeUpperChars,excludeSimilarChars:!!h.excludeSimilarChars,strict:!!h.strictMode,verbose:!h.quietMode},l=e(l);u=`
${p.info_copying||"Copying to clipboard"}...`,h.quietMode||console.info(u),u=(u=Array.isArray(l)?l.join("\n"):l).replace(/"/g,'""'),d={darwin:{binPath:"/usr/bin/pbcopy",args:[]},linux:{binPath:"/usr/bin/xclip",args:["-selection","clipboard"]},win32:{binPath:o.join(process.env.SYSTEMROOT,"System32","WindowsPowerShell","v1.0","powershell.exe"),args:["-Command","Set-Clipboard -Value $input"]}},s(...Object.values(d[process.platform]),{input:u})}function $(o){return new Promise((r,e)=>{var s=o.match(/^([^:]+):\/\//)[1];/^https?$/.test(s)||e(new Error(`${p.error_invalidURL||"Invalid URL"}.`)),require(s).get(o,e=>{let s="";e.on("data",e=>s+=e),e.on("end",()=>r({json:()=>JSON.parse(s)}))}).on("error",e)})}function w(){console.info(`
${p.info_moreHelp||"For more help"}, ${p.info_type||"type"} generate-pw --help' ${p.info_or||"or"} ${p.info_visit||"visit"}
${i}${docURL}[0m`)}function _(e=["header","usage","paramOptions","flags","infoCmds"]){var s=`[106m[30m ${pkgName} [0m `;let r={header:[`
â”œ `+s+(p.appCopyright||copyright),s+(p.prefix_source||"Source")+": "+srcURL],usage:[`
${i}o ${p.helpSection_usage||"Usage"}:[0m`,` ${i}Â» [1;92m${cmdFormat}[0m`],paramOptions:[`
${i}o ${p.helpSection_paramOptions||"Parameter options"}:[0m`,` --length=n                  ${p.optionDesc_length||"Generate password(s) of n length"}.`,` --qty=n                     ${p.optionDesc_qty||"Generate n password(s)"}.`,` --charset=chars             ${p.optionDesc_charset||"Only include chars in password(s)"}.`,` --exclude=chars             ${p.optionDesc_exclude||"Exclude chars from password(s)"}.`],flags:[`
${i}o ${p.helpSection_flags||"Boolean options"}:[0m`,` -n, --include-numbers       ${p.optionDesc_includeNums||"Allow numbers in password(s)"}.`,` -y, --include-symbols       ${p.optionDesc_includeSymbols||"Allow symbols in password(s)"}.`,` -L, --no-lowercase          ${p.optionDesc_noLower||"Disallow lowercase letters in password(s)"}.`,` -U, --no-uppercase          ${p.optionDesc_noUpper||"Disallow uppercase letters in password(s)"}.`,` -S, --no-similar            ${p.optionDesc_noSimilar||"Exclude similar characters in password(s)"}.`,` -s, --strict                ${p.optionDesc_strict||"Require at least one character from eachallowed character set in password(s)"}.`,` -q, --quiet                 ${p.optionDesc_quiet||"Suppress all logging except errors"}.`],infoCmds:[`
${i}o ${p.helpSection_infoCmds||"Info commands"}:[0m`," -h, --help                  "+(p.optionDesc_help||"Display help screen."),` -v, --version               ${p.optionDesc_version||"Show version number"}.`]};e.forEach(t=>r[t]?.forEach(s=>{{var a=/header|usage/.test(t)?1:29;let r=process.stdout.columns||80,o=[],e=s.match(/\S+|\s+/g),n="";e.forEach(e=>{var s=r-(o.length?a:0);n.length+"| ".length+e.length>s&&(o.push(o.length?n.trimStart():n),n=""),n+=e}),o.push(o.length?n.trimStart():n),o.forEach((e,s)=>console.info("| "+(0==s?e:" ".repeat(a)+e)))}})),console.info(`
${p.info_moreHelp||"For more help"}, ${p.info_visit||"visit"}: ${i}${docURL}[0m`)}})();