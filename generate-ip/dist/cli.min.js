#!/usr/bin/env node
/**
/**
 *  Â© 2023â€“2026 Adam Lui & contributors under the MIT license.
 *  Source: https://code.minify-js.org/node.js
 *  Documentation: https://docs.minify-js.org/node.js
 */
 *  Â© 2024â€“2026 Adam Lui & contributors under the MIT license.
 *  Source: https://code.generate-ip.org
 *  Documentation: https://docs.generate-ip.org
 */
let pkgName="generate-ip",copyright="Â© 2024â€“2026 Adam Lui & contributors under the MIT license.",cmdFormat="generate-[ip|ipv6|mac] [options|commands]",srcURL="https://code.generate-ip.org",docURL="https://docs.generate-ip.org/#-command-line-usage",latestLocaleCommitHash="0e30af1";(async()=>{let{ipv4:e,ipv6:o,mac:r}=require(__dirname.match(/src/)?"./generate-ip":"./generate-ip.min"),s=require("fs"),n=require("path"),{execSync:t,execFileSync:i}=require("child_process"),a="[0m",c="[1;91m",p="[1;97m",l="en";if("win32"==process.platform)try{l=t("(Get-Culture).TwoLetterISOLanguageName",{shell:"powershell",encoding:"utf-8"}).trim()}catch(e){console.error("ERROR loading system language: "+e.message)}else{var m=process.env;l=(m.LANG||m.LANGUAGE||m.LC_ALL||m.LC_MESSAGES||m.LC_NAME||"en").split(".")[0]}let g={};var d,m=new Promise((n,t)=>{let i=`https://cdn.jsdelivr.net/gh/adamlui/js-utils@c055b5c6864d9af9fdee395df69a358fca84af21/${pkgName}/_locales/`;var e=`${l?l.replace("-","_"):"en"}/`;let a=i+e+"messages.json",c=0;$(a).then(async function o(r){try{let e=await r.json(),o={};for(var s in e)"object"==typeof e[s]&&"message"in e[s]&&(o[s]=e[s].message);n(o)}catch(e){if(3==++c)return n({});$(a=l.includes("-")&&1==c?a.replace(/([^_]*)_[^/]*(\/.*)/,"$1$2"):i+"en/messages.json").then(o).catch(t)}}).catch(t)});try{g=await m}catch(e){console.error("ERROR fetching messages: "+e.message)}let f={},h={paramOptions:{qty:/^--?qu?a?n?ti?t?y(?:=.*|$)/},flags:{ipv6mode:/^--?(?:ip)?v?6(?:-?mode)?$/,macMode:/^--?m(?:ac)?(?:-?mode)?$/,quietMode:/^--?q(?:uiet)?(?:-?mode)?$/},infoCmds:{help:/^--?h(?:elp)?$/,version:/^--?ve?r?s?i?o?n?$/}};if(process.argv.forEach(o=>{var e,r,s;o.startsWith("-")&&(e=Object.keys(h.paramOptions).find(e=>h.paramOptions[e].test(o)),s=Object.keys(h.flags).find(e=>h.flags[e].test(o)),r=Object.keys(h.infoCmds).find(e=>h.infoCmds[e].test(o)),s?f[s]=!0:e?(/=.+/.test(o)||(console.error(`
${c+(g.prefix_error||"ERROR")}: `+`Arg [--${o.replace(/-/g,"")}] `+`${g.error_noEqual||"requires '=' followed by a value"}.${a}`),_(),process.exit(1)),s=o.split("=")[1],f[e]=parseInt(s)||s):r||/ipv4/.test(o)||(console.error(`
${c+(g.prefix_error||"ERROR")}: `+`Arg [${o}] ${g.error_notRecognized||"not recognized"}.[0m`),console.info(`
${"[1;33m"+(g.info_validArgs||"Valid arguments are below")}.[0m`),v(["paramOptions","flags","infoCmds"]),process.exit(1)))}),f.qty&&(isNaN(f.qty)||f.qty<1)&&(console.error(`
${c+(g.prefix_error||"ERROR")}: [qty] `+`${g.error_nonPositiveNum||"argument can only be > 0"}.${a}`),_(),process.exit(1)),process.argv.some(e=>h.infoCmds.help.test(e)))v();else if(process.argv.some(e=>h.infoCmds.version.test(e))){m=t(`npm view ${pkgName} version`).toString().trim()||"none";let e,o=process.cwd();for(;"/"!=o;){var u=n.join(o,"package.json");if(s.existsSync(u)){u=require(u);e=(u.dependencies?.[pkgName]||u.devDependencies?.[pkgName])?.match(/^[~^>=]?\d+\.\d+\.\d+$/)?.[1]||"none";break}o=n.dirname(o)}console.info(`
${g.prefix_globalVer||"Global version"}: `+m),console.info(`${g.prefix_localVer||"Local version"}: `+e)}else{m={qty:f.qty||1,verbose:!f.quietMode},m=(f.ipv6mode?o:f.macMode?r:e).generate(m);d=`
${g.info_copying||"Copying to clipboard"}...`,f.quietMode||console.info(d),d=Array.isArray(m)?m.join("\n"):m,m={darwin:{binPath:"/usr/bin/pbcopy",args:[]},linux:{binPath:"/usr/bin/xclip",args:["-selection","clipboard"]},win32:{binPath:n.join(process.env.SYSTEMROOT,"System32","WindowsPowerShell","v1.0","powershell.exe"),args:["-Command","Set-Clipboard -Value $input"]}},i(...Object.values(m[process.platform]),{input:d})}function $(s){return new Promise((r,e)=>{var o=s.match(/^([^:]+):\/\//)[1];/^https?$/.test(o)||e(new Error(`${g.error_invalidURL||"Invalid URL"}.`)),require(o).get(s,e=>{let o="";e.on("data",e=>o+=e),e.on("end",()=>r({json:()=>JSON.parse(o)}))}).on("error",e)})}function v(e=["header","usage","paramOptions","flags","infoCmds"]){var o=`[106m[30m ${pkgName} [0m `;let r={header:[`
â”œ `+o+(g.appCopyright||copyright),o+(g.prefix_source||"Source")+": "+srcURL],usage:[`
${p}o ${g.helpSection_usage||"Usage"}:[0m`,` ${p}Â» [1;92m${cmdFormat}[0m`],paramOptions:[`
${p}o ${g.helpSection_paramOptions||"Parameter options"}:[0m`,` --qty=n                     ${g.optionDesc_qty||"Generate n IP address(es)"}.`],flags:[`
${p}o ${g.helpSection_flags||"Boolean options"}:[0m`,` -6, --ipv6                  ${g.optionDesc_ipv6||"Generate IPv6 address"}.`,` -m, --mac                   ${g.optionDesc_mac||"Generate MAC address"}.`,` -q, --quiet                 ${g.optionDesc_quiet||"Suppress all logging except errors"}.`],infoCmds:[`
${p}o ${g.helpSection_infoCmds||"Info commands"}:[0m`," -h, --help                  "+(g.optionDesc_help||"Display help screen."),` -v, --version               ${g.optionDesc_version||"Show version number"}.`]};e.forEach(i=>r[i]?.forEach(o=>{{var t=/header|usage/.test(i)?1:29;let r=process.stdout.columns||80,s=[],e=o.match(/\S+|\s+/g),n="";e.forEach(e=>{var o=r-(s.length?t:0);n.length+"| ".length+e.length>o&&(s.push(s.length?n.trimStart():n),n=""),n+=e}),s.push(s.length?n.trimStart():n),s.forEach((e,o)=>console.info("| "+(0==o?e:" ".repeat(t)+e)))}})),console.info(`
${g.info_moreHelp||"For more help"}, ${g.info_visit||"visit"}: ${p}${docURL}[0m`)}function _(){console.info(`
${g.info_moreHelp||"For more help"}, ${g.info_type||"type"} generate-ip --help' ${g.info_or||"or"} ${g.info_visit||"visit"}
${p}${docURL}[0m`)}})();