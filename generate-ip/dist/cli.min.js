#!/usr/bin/env node
const e=require(__dirname.match(/src/)?"./generate-ip":"./generate-ip.min")["ipv4"],o=require("child_process")["execSync"],n="[0m",t="[1;91m",i="[1;33m",a={},p={paramOptions:{qty:/^--?qu?a?n?ti?t?y=.*$/},flags:{quietMode:/^--?q(?:uiet)?(?:-?mode)?$/},infoCmds:{help:/^--?h(?:elp)?$/,version:/^--?ve?r?s?i?o?n?$/}};if(process.argv.forEach(o=>{var e,s,r;o.startsWith("-")&&(e=Object.keys(p.paramOptions).find(e=>p.paramOptions[e].test(o)),r=Object.keys(p.flags).find(e=>p.flags[e].test(o)),s=Object.keys(p.infoCmds).find(e=>p.infoCmds[e].test(o)),r?a[r]=!0:e?(r=o.split("=")[1],a[e]=parseInt(r)||r):s||(console.error(`
${t}ERROR: Arg [${o}] not recognized.`+n),console.info(`
${i}Valid arguments are below.`+n),c(["paramOptions","flags","infoCmds"]),process.exit(1)))}),process.argv.some(e=>p.infoCmds.help.test(e)))c();else if(process.argv.some(e=>p.infoCmds.version.test(e)))console.info("v"+require("./package.json").version);else{a.qty&&(isNaN(a.qty)||a.qty<1)&&(console.error(`
${t}Error: [qty] argument can only be > 0.`+n),process.exit(1));const r=e.generate({qty:a.qty||1,verbose:!a.quietMode});a.quietMode||(1<a.qty&&console.info(`[ ${r.join(", ")} ]`),console.info("\nCopying to clipboard...")),s(Array.isArray(r)?r.join("\n"):r)}function c(e=["cmdFormat","paramOptions","flags","infoCmds"]){const o={cmdFormat:[`
${i}generate-ip [options|commands]`+n],paramOptions:["\nParameter options:"," --qty=n                     Generate n IP address(es)."],flags:["\nBoolean options:"," -q, --quiet                 Suppress all logging except errors."],infoCmds:["\nInfo commands:"," -h, --help                  Display help screen."," -v, --version               Show version number."]};e.forEach(e=>{o[e]?.forEach(e=>{{const r=process.stdout.columns||80,n=[],o=e.match(/\S+|\s+/g);let s="";o.forEach(e=>{var o=r-(0===n.length?0:29);s.length+e.length>o&&(n.push(0===n.length?s:s.trimStart()),s=""),s+=e}),n.push(0===n.length?s:s.trimStart()),n.forEach((e,o)=>console.info(0===o?e:" ".repeat(29)+e))}})})}function s(e){e=e.replace(/\s+$/,"").replace(/"/g,'""'),"darwin"===process.platform?o(`printf "${e}" | pbcopy`):"linux"===process.platform?o(`printf "${e}" | xclip -selection clipboard`):"win32"===process.platform&&o(`Set-Clipboard -Value "${e}"`,{shell:"powershell"})}