/**
 *  © 2024 Adam Lui & contributors under the MIT license.
 *  Source: https://code.js-utils.com/generate-ip
 *  Documentation: https://docs.js-utils.com/generate-ip
 */
let randomInt;try{({randomInt}=require("crypto"))}catch(e){const b=window.crypto||window.msCrypto;randomInt=(e,o)=>{var t=b?.getRandomValues(new Uint32Array(1))[0]/4294967295||Math.random();return Math.floor(t*(o-e))+e}}const ipv4={generate:function(o={}){var e={verbose:!0,qty:1};if(validateOptions(o,e,"https://docs.js-utils.com/generate-ip/#ipv4generateoptions","ipv4.generate({ verbose: false, qty: 3 })")){(o={...e,...o}).verbose&&console.info(`ipv4.generate() » Generating IPv4 address${1<o.qty?"es":""}...`);var t=[];if(1<o.qty)for(let e=0;e<o.qty;e++)t.push(this.generate({...o,qty:1,verbose:!1}));else{var i=[];for(let e=0;e<4;e++)i.push(randomInt(0,256));t.push(i.join("."))}e=1<o.qty?t:t[0];return o.verbose&&(console.info(`ipv4.generate() » IPv4 address${1<o.qty?"es":""} generated!`),1==o.qty?console.info("ipv4.generate() » "+e):"undefined"!=typeof require&&/cli(?:\.min)?\.js$/.test(require.main.filename)||console.info("ipv4.generate() » Check returned array.")),e}},validate:function(e,o={}){var t="https://docs.js-utils.com/generate-ip/#ipv4validateaddress-options",i={verbose:!0};if("string"!=typeof e)console.error("ipv4.validate() » ERROR: 1st arg <address> must be a string."),console.info("ipv4.validate() » For more help, please visit "+t);else if(validateOptions(o,i,t,"ipv4.validate('0.0.255.255', { verbose: false })"))return(o={...i,...o}).verbose&&console.info("ipv4.validate() » Validating IPv4 address..."),i=!(4!=(t=e.split(".")).length||t.some(e=>!/^\d+$/.test(e)||parseInt(e,10)<0||255<parseInt(e,10))),o.verbose&&console.info(`ipv4.validate() » IP is ${i?"":"in"}valid IPv4 address!`),i}},ipv6={generate:function(o={}){var e={verbose:!0,qty:1,leadingZeros:!1,doubleColon:!0};if(validateOptions(o,e,"https://docs.js-utils.com/generate-ip/#ipv6generateoptions","ipv6.generate({ leadingZeros: true, qty: 5 })")){(o={...e,...o}).verbose&&console.info(`ipv6.generate() » Generating IPv6 address${1<o.qty?"es":""}...`);var t=[];if(1<o.qty)for(let e=0;e<o.qty;e++)t.push(this.generate({...o,qty:1,verbose:!1}));else{const i=[],{qty:r,...s}=o;for(let e=0;e<8;e++){let o="";for(let e=0;e<4;e++)o+=randomInt(0,16).toString(16);i.push(o)}t.push(this.format(i.join(":"),{...s,verbose:!1}))}e=1<o.qty?t:t[0];return o.verbose&&(console.info(`ipv6.generate() » IPv6 address${1<o.qty?"es":""} generated!`),console.info(1==o.qty?"ipv6.generate() » "+e:"ipv6.generate() » Check returned array.")),e}},format:function(o,t={}){var i,e="https://docs.js-utils.com/generate-ip/#ipv6formataddress-options",r={verbose:!0,leadingZeros:!1,doubleColon:!0};if("string"!=typeof o)console.error("ipv6.format() » ERROR: 1st arg <address> must be a string."),console.info("ipv6.format() » For more help, please visit "+e);else if(this.validate(o,{verbose:!1})){if(validateOptions(t,r,e,"ipv6.format('0d::ffff:192.1.56.10/96', { leadingZeros: true, doubleColon: false })")){t={...r,...t};let e=o;if(e=t.doubleColon?(t.verbose&&console.info("ipv6.format() » Replacing zero series w/ '::'..."),e.replace(/:(?:0+:)+/,"::")):(t.verbose&&console.info("ipv6.format() » Expanding '::' into zero series..."),r=e.split(":").filter(Boolean).length,i=t.leadingZeros?"0000":"0",r=Array(8-r).fill(i).join(":"),e.replace("::",`:${r}:`)),t.leadingZeros){t.verbose&&console.info("ipv6.format() » Adding leading zeros...");var s=e.split(":");for(let e=0;e<s.length;e++)for(;s[e].length<4;)s[e]="0"+s[e];e=s.join(":")}else t.verbose&&console.info("ipv6.format() » Stripping leading zeros..."),e=o.replace(/(^|(?<=:))0+(?!:)/g,"$1");return t.verbose&&(e!=o?console.info("ipv6.format() » IP formatted successfully!"):console.info("ipv6.format() » IP already formatted to specs."),console.info("ipv6.format() » "+e)),e}}else console.error(`ipv6.format() » ERROR:  ${o} is not a valid IPv6 address.`),console.info("ipv6.format() » For more help, please visit "+e)},validate:function(e,o={}){var t="https://docs.js-utils.com/generate-ip/#ipv6validateaddress-options",i={verbose:!0};if("string"!=typeof e)console.error("ipv6.validate() » ERROR: 1st arg <address> must be a string."),console.info("ipv6.validate() » For more help, please visit "+t);else if(validateOptions(o,i,t,"ipv6.validate('0:0:0:0:0:ffff:192.1.56.10/96', { verbose: false })")){(o={...i,...o}).verbose&&console.info("ipv6.validate() » Validating IPv6 address...");const r=e.split(/::?/),s=r[r.length-1];t=!(e.includes("::")&&2<e.split("::").length||/:{3,}/g.test(e)||r.length<2||8<r.length||r.some(e=>!(/^[\dA-Fa-f]{1,4}$/.test(e)||e==s&&ipv4.validate(s.replace(/\/(?:0|(?:[1-2]?\d)|32|96)$/,""),{verbose:!1}))));return o.verbose&&console.info(`ipv6.validate() » IP is ${t?"":"in"}valid IPv6 address!`),t}}};function validateOptions(e,o,t,i){const r=JSON.stringify(o,null,2).replace(/"([^"]+)":/g,"$1:").replace(/"/g,"'").replace(/\n\s*/g," "),s=Object.keys(o).join(", "),n=Object.keys(o).filter(e=>"boolean"==typeof o[e]),a=Object.keys(o).filter(e=>Number.isInteger(o[e]));let l="validateOptions() » ";try{l=validateOptions.caller?.name+"() » "}catch(e){}var p=i.split(",").findIndex(e=>e.trim().startsWith("{"))+1,v=(p+=["st","nd","rd"][p-1]||"th",()=>{console.info(`${l}Valid options: [ ${s} ]`),console.info(l+"If omitted, default settings are: "+r)}),d=()=>{console.info(l+"For more help, please visit "+t)};if("object"!=typeof e)return console.error(l+`ERROR: ${"0th"==p?"[O":p+" arg [o"}ptions] can only be an object of key/values.`),console.info(l+"Example valid call: "+i),v(),d(),!1;for(const f in e){if(!Object.prototype.hasOwnProperty.call(o,f))return console.error(`${l}ERROR: \`${f}\` is an invalid option.`),v(),d(),!1;if(n.includes(f)&&"boolean"!=typeof e[f])return console.error(`${l}ERROR: [${f}] option can only be \`true\` or \`false\`.`),d(),!1;if(a.includes(f)&&(e[f]=parseInt(e[f],10),isNaN(e[f])||e[f]<1))return console.error(`${l}ERROR: [${f}] option can only be an integer > 0.`),d(),!1}return!0}const apiAliases={ipv4:["IPV4","IPv4","ipV4"],ipv6:["IPV6","IPv6","ipV6"]};try{module.exports={ipv4:ipv4,ipv6:ipv6}}catch(e){}try{window.ipv4=ipv4,window.ipv6=ipv6}catch(e){}for(const ua in apiAliases)apiAliases[ua].forEach(e=>{try{module.exports[e]=module.exports[ua]}catch(e){}try{window[e]=window[ua]}catch(e){}});