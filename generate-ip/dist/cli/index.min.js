#!/usr/bin/env node
/**
 *  Â© 2024â€“2026 Adam Lui & contributors under the MIT license.
 *  Source: https://code.generate-ip.org
 *  Documentation: https://docs.generate-ip.org
 */
(async()=>{globalThis.env={devMode:__dirname.match(/[\\/]src/)};var e=require("node-clipboardy"),s=require("child_process").execSync,o=require("fs"),{getMsgs:a,getSysLang:p}=require(`./lib/language${env.devMode?"":".min"}.js`),{ipv4:r,ipv6:i,mac:n}=require(`../generate-ip${env.devMode?"":".min"}.js`),t=require("path");globalThis.app=require(`../${env.devMode?"../":"./data/"}app.json`),app.urls.docs+="/#-command-line-usage",app.msgs=await a(p()),app.regex={paramOptions:{qty:/^--?qu?a?n?ti?t?y(?:=.*|$)/},flags:{ipv6mode:/^--?(?:ip)?v?6(?:-?mode)?$/,macMode:/^--?m(?:ac)?(?:-?mode)?$/,quietMode:/^--?q(?:uiet)?(?:-?mode)?$/},infoCmds:{help:/^--?h(?:elp)?$/,version:/^--?ve?r?s?i?o?n?$/},version:/^[~^>=]?\d+\.\d+\.\d+$/};let m="[1;91m",g="[1;97m";if(app.config={},process.argv.forEach(p=>{var e,s,o;p.startsWith("-")&&(e=Object.keys(app.regex.paramOptions).find(e=>app.regex.paramOptions[e].test(p)),o=Object.keys(app.regex.flags).find(e=>app.regex.flags[e].test(p)),s=Object.keys(app.regex.infoCmds).find(e=>app.regex.infoCmds[e].test(p)),o?app.config[o]=!0:e?(/=.+/.test(p)||(console.error(`
${m}${app.msgs.prefix_error}: Arg [--${p.replace(/-/g,"")}] ${app.msgs.error_noEqual}.[0m`),f(),process.exit(1)),o=p.split("=")[1],app.config[e]=parseInt(o)||o):s||/ipv4/.test(p)||(console.error(`
${m}${app.msgs.prefix_error}: Arg [${p}] ${app.msgs.error_notRecognized}.[0m`),console.info(`
[1;33m${app.msgs.info_validArgs}.[0m`),l(["paramOptions","flags","infoCmds"]),process.exit(1)))}),app.config.qty&&(isNaN(app.config.qty)||app.config.qty<1)&&(console.error(`
${m}${app.msgs.prefix_error}: [qty] ${app.msgs.error_nonPositiveNum}.[0m`),f(),process.exit(1)),process.argv.some(e=>app.regex.infoCmds.help.test(e)))l();else if(process.argv.some(e=>app.regex.infoCmds.version.test(e))){var a=s(`npm view ${JSON.stringify(app.name)} version`).toString().trim()||"none";let e,p=process.cwd();for(;"/"!=p;){var c=t.join(p,"package.json");if(o.existsSync(c)){c=require(c);e=(c.dependencies?.[app.name]||c.devDependencies?.[app.name])?.match(app.regex.version)?.[1]||"none";break}p=t.dirname(p)}console.info(`
${app.msgs.prefix_globalVer}: `+a),console.info(app.msgs.prefix_localVer+": "+e)}else{p={qty:app.config.qty||1,verbose:!app.config.quietMode},s=(app.config.ipv6mode?i:app.config.macMode?n:r).generate(p);a=`
${app.msgs.info_copying}...`,app.config.quietMode||console.info(a),e.writeSync(Array.isArray(s)?s.join("\n"):s)}function f(){console.info(`
${app.msgs.info_moreHelp}, ${app.msgs.info_type} ${app.name} --help' ${app.msgs.info_or} ${app.msgs.info_visit}
${g}${app.urls.docs}[0m`)}function l(e=["header","usage","paramOptions","flags","infoCmds"]){app.prefix=`[106m[30m ${app.name} [0m `;let p={header:[`
â”œ ${app.prefix}${app.msgs.appCopyright||`Â© ${app.copyrightYear} ${app.author} under the ${app.license} license`}.`,""+app.prefix+app.msgs.prefix_source+": "+app.urls.src],usage:[`
${g}o ${app.msgs.helpSection_usage}:[0m`,` ${g}Â» [1;92m${app.cmdFormat}[0m`],paramOptions:[`
${g}o ${app.msgs.helpSection_paramOptions}:[0m`,` --qty=n                     ${app.msgs.optionDesc_qty}.`],flags:[`
${g}o ${app.msgs.helpSection_flags}:[0m`,` -6, --ipv6                  ${app.msgs.optionDesc_ipv6}.`,` -m, --mac                   ${app.msgs.optionDesc_mac}.`,` -q, --quiet                 ${app.msgs.optionDesc_quiet}.`],infoCmds:[`
${g}o ${app.msgs.helpSection_infoCmds}:[0m`," -h, --help                  "+app.msgs.optionDesc_help,` -v, --version               ${app.msgs.optionDesc_version}.`]};e.forEach(i=>p[i]?.forEach(p=>{{var r=/header|usage/.test(i)?1:29;let s=process.stdout.columns||80,o=[],e=p.match(/\S+|\s+/g),a="";e.forEach(e=>{var p=s-(o.length?r:0);a.length+"| ".length+e.length>p&&(o.push(o.length?a.trimStart():a),a=""),a+=e}),o.push(o.length?a.trimStart():a),o.forEach((e,p)=>console.info("| "+(0==p?e:" ".repeat(r)+e)))}})),console.info(`
${app.msgs.info_moreHelp}, ${app.msgs.info_visit}: ${g}${app.urls.docs}[0m`)}})();