#!/usr/bin/env node
/**
 *  Â© 2024â€“2026 Adam Lui & contributors under the MIT license.
 *  Source: https://github.com/adamlui/js-utils/tree/main/generate-ip/src
 *  Documentation: https://github.com/adamlui/js-utils/tree/main/generate-ip/docs
 */
(async()=>{globalThis.env={devMode:__dirname.match(/[\\/]src/)};let e=require("node-clipboardy"),{getMsgs:p,getSysLang:o}=require(`./lib/language${env.devMode?"":".min"}.js`),{ipv4:r,ipv6:s,mac:a}=require(`../generate-ip${env.devMode?"":".min"}.js`),i=require(`./lib/print${env.devMode?"":".min"}.js`);var n;Object.assign(globalThis.app??={},require(`../${env.devMode?"../":"./data/"}app.json`)),app.urls.docs+="/#-command-line-usage",app.msgs=await p(o()),app.colors={nc:"[0m",br:"[1;91m",by:"[1;33m",bg:"[1;92m",bw:"[1;97m",blk:"[30m",tlBG:"[106m"},app.regex={paramOptions:{qty:/^--?qu?a?n?ti?t?y(?:=.*|$)/},flags:{ipv6mode:/^--?(?:ip)?v?6(?:-?mode)?$/,macMode:/^--?m(?:ac)?(?:-?mode)?$/,quietMode:/^--?q(?:uiet)?(?:-?mode)?$/},infoCmds:{help:/^--?h(?:elp)?$/,version:/^--?ve?r?s?i?o?n?$/},version:/^[~^>=]?\d+\.\d+\.\d+$/},app.config={},process.argv.forEach(p=>{var e,o,r;p.startsWith("-")&&(e=Object.keys(app.regex.paramOptions).find(e=>app.regex.paramOptions[e].test(p)),r=Object.keys(app.regex.flags).find(e=>app.regex.flags[e].test(p)),o=Object.keys(app.regex.infoCmds).find(e=>app.regex.infoCmds[e].test(p)),r?app.config[r]=!0:e?(/=.+/.test(p)||(console.error(`
${app.colors.br}${app.msgs.prefix_error}: Arg [--${p.replace(/-/g,"")}] ${app.msgs.error_noEqual}.`+app.colors.nc),i.helpCmdAndDocURL(),process.exit(1)),r=p.split("=")[1],app.config[e]=parseInt(r)||r):o||/ipv4/.test(p)||(console.error(`
${app.colors.br}${app.msgs.prefix_error}: Arg [${p}] ${app.msgs.error_notRecognized}.`+app.colors.nc),console.info(`
${app.colors.by}${app.msgs.info_validArgs}.`+app.colors.nc),i.help(["paramOptions","flags","infoCmds"]),process.exit(1)))}),app.config.qty&&(isNaN(app.config.qty)||app.config.qty<1)&&(console.error(`
${app.colors.br}${app.msgs.prefix_error}: [qty] ${app.msgs.error_nonPositiveNum}.`+app.colors.nc),i.helpCmdAndDocURL(),process.exit(1)),process.argv.some(e=>app.regex.infoCmds.help.test(e))?i.help():process.argv.some(e=>app.regex.infoCmds.version.test(e))?i.version():(n={qty:app.config.qty||1,verbose:!app.config.quietMode},n=(app.config.ipv6mode?s:app.config.macMode?a:r).generate(n),i.ifNotQuiet(`
${app.msgs.info_copying}...`),e.writeSync([].concat(n).join("\n")))})();